# Alternate Render manifest: include Postgres as a service (type: postgresql)
# Try importing this manifest if your importer expects all resources under `services:`.

services:
  - type: postgresql
    name: minesweeper-db
    plan: starter

  - type: web
    name: minesweeper-app
    env: docker
    dockerfilePath: Dockerfile.deploy
    branch: main
    buildCommand: null
    startCommand: "uvicorn app.main:app --host 0.0.0.0 --port $PORT"
    envVars:
      - key: ALLOW_ORIGIN
        value: "*"
    databases:
      - minesweeper-db
