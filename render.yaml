# Render manifest to define a managed Postgres + Docker web service
# - Push this repo to GitHub and connect it to Render
# - Render will create the database and inject the DATABASE_URL into the web service

databases:
  - name: minesweeper-db
    plan: starter

services:
  - type: web
    name: minesweeper-app
    env: docker
    dockerfilePath: Dockerfile.deploy
    branch: main
    buildCommand: null
    startCommand: "uvicorn app.main:app --host 0.0.0.0 --port $PORT"
    envVars:
      - key: ALLOW_ORIGIN
        value: "*"
    databases:
      - minesweeper-db
